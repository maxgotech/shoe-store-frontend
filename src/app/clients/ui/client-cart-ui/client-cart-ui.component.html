<div class="page">
    <h1 class="cart">Корзина:</h1>
    <tui-loader [overlay]="true" [showLoader]=loading>
        <ng-container *ngIf="loading;else loaded">
            <div class="loader"></div>
        </ng-container>
        <ng-template #loaded>
            <ng-container *ngIf="cartStatus;else empty">
                <form [formGroup]="myGroup" (ngSubmit)="submit()">
                    <div class="card-container"
                        *ngFor="let category of myGroup.controls['myCategory'].controls; let i = index;let last = last"
                        [ngClass]="{'last-child': last}">
                        <div class="card">
                            <div class="base_row">
                                <div class="img-container">
                                    <img class="pic"
                                        src='/assets/images/products{{productDto.products![i].picture_path}}'>
                                </div>
                                <div class="name">
                                    <span>{{productDto.products![i].name}}</span>
                                </div>
                                <div class="price">
                                    <span>{{productDto.products![i].price | number: '2.'}}₽</span>
                                </div>
                            </div>
                            <div class="checkbox">
                                <tui-checkbox [formControl]="category" size="l"></tui-checkbox>
                            </div>
                        </div>
                    </div>
                    <h1 class="fullprice">Стоимость: {{productDto.fullprice | number: '2.'}}₽</h1>
                    <button tuiButton type="submit">Купить</button>
                </form>
            </ng-container>
            <ng-template #empty>
                <h1 class="empty">Корзина пуста</h1>
            </ng-template>
        </ng-template>
    </tui-loader>
</div>